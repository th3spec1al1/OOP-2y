# Лабораторная 4

# Отрабатываемый материал

SOLID, поведенческие, структурные, порождающие паттерны

# Цель

Проверить освоение студентом принципов SOLID, паттернов проектирования.

# Задание

Разработать приложение для взаимодействия и управления файловой системой.

# Функциональные требования

- Навигация по дереву файловой системы (относительные и абсолютные пути)
    - Используется unix синтаксис для определения путей
    - Должны поддерживаться `.` и `..`
- Просмотр содержимого каталога в консоли
- Просмотр содержимого файлов в консоли
- Перемещение файлов
- Копирование файлов
- Удаление файлов
- Переименование файлов
- Консольный механизм взаимодействия с приложением
- Реализация операций для локальной файловой системы

# Не функциональные требования

- Система должна поддерживать взаимодействие посредством консольных команд, имеющих флаги.
- Логика работы системы не должна быть привязана к обработке консольных команд.
- Система должна поддерживать возможность расширения параметров консольных команд.
    - Добавление новых параметров команд должно соблюдать OCP, не должно приводить к изменению существующей логики их
      парсинга
- Обработка команд не должна быть привязана к консоли.
- Система не должна быть завязана на локальную файловую систему.
- Вывод содержимого каталога должен быть параметризован глубиной выборки (значение по умолчанию - 1)
- Вывод системного каталога должен быть в виде дерева.
- Параметры выводимого дерева (символы обозначающие файл, папку, символы используемые для отступов должны быть
  программно параметризуемыми).
- Логика вывода содержимого каталога не должна быть завязана на консоль.
- Логика вывода содержимого файла не должна быть завязана на консоль.
- Система должна адекватно обрабатывать случаи коллизий имён.
- Система должна адекватно обрабатывать попытки работы с не существующими файлами или директориями
- Система должна уметь переключаться между файловыми системами (например смена диска C, на диск D).
- После вывода результата на консольный интерфейс, программа должна ожидать ввод следующей команды.
- Для реализации системы нельзя использовать какие-либо сторонние библиотеки
- Реализация системы должна разумно расходовать память
    - Ни в какой момент времени в памяти не должно находиться полное представление среза ФС с которым работает программа
    - Объектное представление структуры ФС должно быть ленивым, даные должны загружаться по мере необходимости

# Глоссарий

- Относительный путь - путь от текущего положения, выбранного в системе
- Абсолютный путь - путь от положения, в которое изначально было сделано подключение
- Путь подключения – абсолютный путь, куда было сделано подключение
- Локальный путь – текущее расположение относительно пути подключения (локальный путь никогда не должен выходить за
  пределы пути подключения, те директория обозначаемая локальным путём, всегда должна являться подкаталогом пути
  подключения или равняться ему)
- [Parameter] – позиционный параметр
- [-f] – не обязательный именованный флаг
- {-f} – обязательный именованный флаг

# Реализуемые команды

## connect [Address] [-m Mode]

Подключает систему к определённой ФС на заданном пути. Данная команда задаёт путь подключения, а также задёт локальный
путь равный корню пути подключения. Данная команда должна принимать на вход только абсолютные пути.

В не подключенном состоянии, система не должна иметь возможность выполнять какие-либо другие действия.

### Параметры

- Address - абсолютный путь в подключаемой файловой системе
- Mode (флаг) - режим файловой системы (требуется реализовать только локальную ФС, значение `local`, значение `local`
  используется по умолчанию)

## disconnect

Отключается от файловой системы. Данная команда может быть выполнена только при имеющемся подключении к ФС. После
выполнения данной команды, система не должна иметь возможность выполнить какую-либо команду кроме подключения.

## tree goto [**Path**]

Выполняет переход до указанного пути относительно точки подключения. Если параметр Path является абсолютным путём,
локальный путь сменяется на переданный, если параметр Path является относительным путём, то переход должен быть выполнен
относительно текущего локального пути.

### Параметры

- **Path** - относительный или абсолютный путь до каталога в файловой системе

## tree list {-d **Depth**}

Выводит срез файловой системы относительно текущего локального пути, глубина среза ограничена параметром.

### Параметры

- **Depth** - параметр, определяющий глубину выборки, должен объявляться флагом `-d`

## file show [**Path**] {-m **Mode**}

Выводит содержимое файла в указанном режиме. Переданный путь может быть как абсолютным, так и относительным.

### Параметры

- **Path** - относительный или абсолютный путь до файла
- **Mode** - режим вывода файла (требуется реализовать только консольный, значение `console`)

## file move [**SourcePath**] [**DestinationPath**]

Перемещает файл из исходной локации в указанную. Если какой-либо из путей – абсолютный, путём до файла должен считаться
путь, относительный пути подключения, если какой-либо из путей – относительный, путём до файла должен считаться путь,
относительный текущему локальному пути.

### Параметры

- **SourcePath** - относительный или абсолютный путь до перемещаемого файла
- **DestinationPath** - относительный или абсолютный путь до директории, куда файл должен быть перемещён

## file copy [**SourcePath**] [**DestinationPath**]

Копирует файл из исходной локации в указанную. Если какой-либо из путей – абсолютный, путём до файла должен считаться
путь, относительный пути подключения, если какой-либо из путей – относительный, путём до файла должен считаться путь,
относительный текущему локальному пути.

### Параметры

- **SourcePath** - относительный или абсолютный путь до копируемого файла
- **DestinationPath** - относительный или абсолютный путь до директории, куда файл должен быть скопирован

## file delete [**Path**]

Удаляет указанный из ФС.

### Параметры

- **Path** - относительный или абсолютный путь до удаляемого файла

## file rename [**Path**] [**Name**]

Переименовывает файл по указанному пути, давая ему указанное имя. Указанное имя не должно быть каким-либо путём, вызов
команды переименования не должен приводить к перемещению файла.

### Параметры

- **Path** - относительный или абсолютный путь до изменяемого файла
- **Name** - новое имя файла

# Test cases

- Протестировать парсер команд: обработка консольных команд с аргументами должна создавать команду корректного типа с
  корректными аргументами

# Definition of done

- Реализованы все функциональные требования
- Реализация соответствует всем не функциональным требованиям
- Реализация не нарушает принципы SOLID, следует основным принципам ООП
- Реализован консольный интерфейс работы с приложением